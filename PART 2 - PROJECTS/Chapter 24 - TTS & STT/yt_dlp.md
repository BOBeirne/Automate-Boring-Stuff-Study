# Youtube Downloader

- **Pre-requisite**: [FFmpeg](https://ffmpeg.org/download.html)
- [Docs](https://pypi.org/project/yt-dlp/)
- [GitHub](https://github.com/yt-dlp/yt-dlp)
- module allowing downloading of youtube video files
- `ydl.download()` function expects a list of video URLs so you need to pass it a list format
- By **default**, yt-dlp tries to** download the best available quality** if you don't pass any options
- currently following **formats** are supported: `3gp`, `aac`, `flv`,`m4a`, `mp3`, `mp4`, `ogg`, `wav`, `webm`

## Downloading videos

```python
import yt_dlp
video_url = 'https://www.youtube.com/watch?v=kSrnLbioN6w'
with yt_dlp.YoutubeDL() as f:
	f.download([video_url]) 
```


## Downloading audio only

```python
import yt_dlp

url = 'https://www.youtube.com/watch?v=kSrnLbioN6w'

# configuration
options = { #yt_dlp config
	'quiet': True, # supress output
	'no_warnings': True, # supress warnings
	'outtmpl': 'downloaded_content.%(ext)s', # use following naming template
	'format': 'm4a/bestaudio/best', # use best audio quality
	'postprocessors': [{ # ffmpeg config
		'key': 'FFmpegExtractAudio', # extract audio only
		'preferredcodec': 'm4a', # use m4a format
	}]
}

with yt_dlp.YoutubeDL(options) as f:
	f.download([video_url])
```

- `outtmpl` helps to define the naming convention for the files, this can be particurarly helpful when passing files to ley's say [[Whisper]] module for subtitle generation.
-  `base` and `medium` models create much higher-quality subtitles than YouTubeâ€™s current autogenerated subtitles.

```python
from pathlib import Path
matches = list(Path().glob('downloaded_content.*')) # use glob to find the pattern
dl_files = str(matches[0])
print(dl_files)
# downloaded_content.m4a
```

## Downloading metadata

```python
import yt_dlp, json
url = 'https://www.youtube.com/watch?v=kSrnLbioN6w'

options = {
	'quiet' : True,
	'no_warnings' : True,
	'skip_download' : True, # skip the download
	}

with yt_dlp.YoutubeDL(options) as f:
	info = f.extract_info(url)
	jsonF = f.sanitize_info(info)
	print('TITLE:', jsonF['title']) # print out title
	print('KEYS:', jsonF.keys())
	with open('metadata.json', 'w', encoding='utf-8') as jf:
		jf.write(json.dumps(jsonF))
```